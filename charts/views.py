from django.shortcuts import render
from django.contrib.auth.decorators import login_required
from json import dumps
from .services import DataProcessor


@login_required
def index(request):
    line_chart_data = DataProcessor.get_line_chart_data()
    area_chart_data = DataProcessor.get_area_chart_data()
    column_chart_data = DataProcessor.get_column_chart_data()
    multi_column_chart_data = DataProcessor.get_multi_column_chart_data()
    stacked_column_chart_data = DataProcessor.get_stacked_column_chart_data()
    pie_chart_data = DataProcessor.get_pie_chart_data()
    context = {
        'line_chart_data': dumps(line_chart_data),
        'area_chart_data': dumps(area_chart_data),
        'column_chart_data': dumps(column_chart_data),
        'multi_column_chart_data': dumps(multi_column_chart_data),
        'stacked_column_chart_data': dumps(stacked_column_chart_data),
        'pie_chart_data': dumps(pie_chart_data)
        }
    return render(request, 'charts/index.html', context)
